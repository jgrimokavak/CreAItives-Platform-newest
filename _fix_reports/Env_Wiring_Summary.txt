# Environment Variable Configuration - Hotfix Implementation
Date: 2025-08-18 21:40 UTC

## Frontend Build Environment (Applied)
VITE_PublicApiBaseUrl=https://creaitives-platform-2-0.replit.app
Status: ✅ Built into dist/public/assets/index-*.js
Effect: SPA will call API at the main domain

## Backend Runtime Environment (To be set)
STATIC_APP_ORIGIN=https://creaitives-platform-2-0-static.replit.app
Status: ⏳ Needs to be set in Autoscale deployment environment variables
Effect: Enables redirect from API to Static deployment

Allowed_Web_Origins=https://creaitives-platform-2-0-static.replit.app
Status: ⏳ Needs to be set in Autoscale deployment environment variables  
Effect: CORS allowlist for static deployment origin

## Redirect Logic Implementation
Code added to server/index.ts:
- Checks if path starts with /api/ or equals /healthz → continue to API
- Otherwise: redirect 308 to STATIC_APP_ORIGIN + path + query
- If STATIC_APP_ORIGIN not set → fallback to 404 JSON

## URL Flow After Implementation
1. User visits: https://creaitives-platform-2-0.replit.app/
2. API server redirects: 308 → https://creaitives-platform-2-0-static.replit.app/
3. Static deployment serves: SPA (with embedded API calls back to step 1)
4. SPA makes API calls: → https://creaitives-platform-2-0.replit.app/api/*
5. API server handles: API requests normally